

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>安装 C++ 环境 &mdash; Cpp  文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/style.css?v=3491b469" />

  
    <link rel="canonical" href="https://self-contained.github.io/Cpp/Install.html"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=7d86a446"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/translations.js?v=beaddf03"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜索" href="search.html" />
    <link rel="next" title="C++ 简介" href="Intro.html" />
    <link rel="prev" title="速查：C++ 语法" href="QuickRef.html" />
 

<!-- <link rel="stylesheet" type="text/css" href="_config/static/DataTables/datatables.min.css"/> -->

<meta name="google-site-verification" content="ZsXR1o8suFFOr_MSgo5BTvjbznAuEP6XYOmgMiBu5Yw" />
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-90643174-3']);
  _gaq.push(['_trackPageview']);
</script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >


          
          
          <a href="index.html" class="icon icon-home">
            Cpp
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="搜索文档" aria-label="搜索文档" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<div class="home-button">
   <a class="home-button" href="https://github.com/wklchris/blog">
      仓库
   </a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="home-button" href="/blog/">
      博客主页
   </a>&nbsp;&nbsp;|&nbsp;&nbsp;<a class="home-button" href="/">
      关于我
   </a>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="导航菜单">
              <p class="caption" role="heading"><span class="caption-text">目录</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="QuickRef.html">速查：C++ 语法</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">安装 C++ 环境</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#msys2">安装 MSYS2</a></li>
<li class="toctree-l2"><a class="reference internal" href="#gcc-cmake">安装 GCC 套件与 CMake</a></li>
<li class="toctree-l2"><a class="reference internal" href="#vs-code-msys2">在 VS Code 中使用 MSYS2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#msys2-vs-code">添加 MSYS2 到 VS Code 内置终端</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cmake">配置 CMake 编译</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gdb">配置 GDB 调试</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clang-tidy">（可选）使用 clang-tidy 静态检查</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id2">安装其他 C++ 库</a></li>
<li class="toctree-l2"><a class="reference internal" href="#msys2-windows-terminal">（可选）将 MSYS2 添加到 Windows Terminal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Intro.html">C++ 简介</a></li>
<li class="toctree-l1"><a class="reference internal" href="Variables.html">变量基础</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataTypes.html">常用数据类型</a></li>
<li class="toctree-l1"><a class="reference internal" href="DataTypesAdvance.html">数据类型进阶</a></li>
<li class="toctree-l1"><a class="reference internal" href="TypeConversion.html">类型转换与溢出*</a></li>
<li class="toctree-l1"><a class="reference internal" href="PointerAndRef.html">引用与指针</a></li>
<li class="toctree-l1"><a class="reference internal" href="Control.html">控制流语句</a></li>
<li class="toctree-l1"><a class="reference internal" href="CMake.html">附录1：CMake 工具</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="移动版导航菜单" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cpp</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="页面导航">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">安装 C++ 环境</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Install.rst.txt" rel="nofollow"> 查看页面源码</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="caution admonition">
<p class="admonition-title">施工提示</p>
<p>本博文尚在施工中，内容并未完成且可能变更。</p>
</div>
<section id="c">
<h1>安装 C++ 环境<a class="headerlink" href="#c" title="Link to this heading"></a></h1>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>本节主要介绍在 Windows 系统上配置 C++ 环境。它基于我的主观经验，也许并不是最佳的选择。</p>
<p>环境配置的内容并不像语法一样长青。在阅读本节时，请注意时效性。</p>
</div>
<p>本节介绍如何在 Windows 上使用 MSYS2 环境，包括：</p>
<ul class="simple">
<li><p>安装 MSYS2</p></li>
<li><p>安装 GCC 编译器、GDB 调试工具、CMake 工具</p></li>
<li><p>如何安装第三方 C++ 库</p></li>
<li><p>在 Visual Studio Code (VS Code) 中配置 C++ 环境</p></li>
</ul>
<section id="msys2">
<h2>安装 MSYS2<a class="headerlink" href="#msys2" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p>前往 <a class="reference external" href="https://www.msys2.org/#installation">MSYS2 官网</a> 下载 MSYS2 安装包。</p></li>
<li><p>运行安装包并指定一个安装位置。在下文的叙述中，我们将此位置用 <code class="docutils literal notranslate"><span class="pre">msys64</span></code> 文件夹指代。</p></li>
</ol>
<div class="admonition attention">
<p class="admonition-title">注意</p>
<p>MSYS2 提供了众多的环境。官方现在推荐较新的 UCRT64 环境，而在本文将使用较稳定的 MINGW64 环境。</p>
</div>
<p>打开安装目录后，我们可以看到多个 MSYS2 环境的执行文件（例如 <code class="docutils literal notranslate"><span class="pre">mingw64.exe</span></code>）。双击以运行，我们就可以看到弹出的 MSYS2 命令行窗口。它将显示像下面这样的内容：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">user</span><span class="nd">@desktop</span><span class="o">-</span><span class="n">name</span> <span class="n">MINGW64</span> <span class="o">~</span>
</pre></div>
</div>
<figure class="align-center">
<a class="reference internal image-reference" href="_images/msys2-terminal.png"><img alt="MSYS2 命令行窗口截图" src="_images/msys2-terminal.png" style="width: 400px;" />
</a>
</figure>
<p>请注意波浪符左侧的 MSYS2 环境标识，这里我们确认它是 MINGW64 环境。</p>
</section>
<section id="gcc-cmake">
<h2>安装 GCC 套件与 CMake<a class="headerlink" href="#gcc-cmake" title="Link to this heading"></a></h2>
<p>在 MINGW64 窗口中，运行 <code class="docutils literal notranslate"><span class="pre">pacman</span></code> 命令来安装 <a class="reference external" href="https://packages.msys2.org/groups/mingw-w64-x86_64-toolchain">GCC 套件</a>：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-x86_64-toolchain</span>
</pre></div>
</div>
<p>该套件包含 GCC 编译器、GDB 调试器，以及 make 等 C++ 环境工具。对于现代 C++ 编译，我们常常使用 CMake，因此建议也安装 CMake 工具：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-x86_64-cmake</span>
</pre></div>
</div>
<p>以上 MINGW64 包将会被安装到 MSYS2 路径中的 <code class="docutils literal notranslate"><span class="pre">mingw64</span></code> 子目录中。</p>
<div class="admonition tip">
<p class="admonition-title">小技巧</p>
<p>这些 pacman 包的安装文件被缓存到了 <code class="docutils literal notranslate"><span class="pre">var\cache\pacman\pkg</span></code> 子目录中。如果你需要重装 MSYS2、更新 MSYS2，或者在另一台设备上安装 MSYS2，复制这些文件可以避免重复下载它们。</p>
</div>
<p>在完成安装后，你可以执行命令来检查 GCC 等已安装项目的版本，确认它们的安装：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">gcc --version</span>
<span class="go">gdb --version</span>
<span class="go">cmake --version</span>
</pre></div>
</div>
<p>最后，我们可以把 MSYS2 安装路径中的 <code class="docutils literal notranslate"><span class="pre">mingw64\bin</span></code> 与 <code class="docutils literal notranslate"><span class="pre">usr\bin</span></code> 这两个子目录都添加到系统的 PATH 环境变量中。请注意可能的环境变量干扰，比如是否安装过 Windows 版本的 CMake。在 Powershell 中，利用 <code class="docutils literal notranslate"><span class="pre">Get-Command</span> <span class="pre">cmake</span> <span class="pre">|</span> <span class="pre">%</span> <span class="pre">Source</span></code> 来检查运行的 CMake 的路径是否位于 MINGW64 安装路径中；如果不是，尝试将添加到 PATH 的两个目录放在 PATH 最前面，然后重新打开一个 Powershell 窗口来测试。</p>
</section>
<section id="vs-code-msys2">
<h2>在 VS Code 中使用 MSYS2<a class="headerlink" href="#vs-code-msys2" title="Link to this heading"></a></h2>
<p>这部分内容在官方页面 <a class="reference external" href="https://code.visualstudio.com/docs/cpp/config-mingw">Using GCC with MINGW</a> 中有部分阐述：</p>
<ol class="arabic">
<li><p>下载并安装 <a class="reference external" href="https://code.visualstudio.com/download">Visual Studio Code</a></p></li>
<li><p>打开 VS Code，从插件市场安装微软官方的 C/C++ 插件。</p></li>
<li><p>新建一个代码文件夹用于测试 C++ 环境。在 VS Code 中，使用“文件”菜单来打开该文件夹。</p></li>
<li><p>在 VS Code 的侧栏中，新建一个名为 hello.cpp 的文件，并粘贴以下代码：</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>保存文件。</p>
</li>
<li><p>尝试使用右上角的“运行”按钮来编译该 C++ 文件。VS Code 会在顶栏弹出列表并询问应该使用的 C++ 编译器。选择其中的 g++.exe 作为编译器。它会自动在当前目录的 <code class="docutils literal notranslate"><span class="pre">.vscode/task.json</span></code> 中完成配置，类似于：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="s2">&quot;tasks&quot;</span><span class="p">:</span> <span class="p">[</span>
         <span class="p">{</span>
             <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;cppbuild&quot;</span><span class="p">,</span>
             <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;C/C++: gcc.exe 生成活动文件&quot;</span><span class="p">,</span>
             <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Programming</span><span class="se">\\</span><span class="s2">msys64</span><span class="se">\\</span><span class="s2">mingw64</span><span class="se">\\</span><span class="s2">bin</span><span class="se">\\</span><span class="s2">gcc.exe&quot;</span><span class="p">,</span>
             <span class="o">...</span> <span class="p">(</span><span class="n">以下省略</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>编译成功后，你应当在左侧发现生成了可执行文件 <code class="docutils literal notranslate"><span class="pre">hello.exe</span></code>。在下方的控制台中，该文件在运行后打印了消息 <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">world</span></code>。</p></li>
</ol>
<section id="msys2-vs-code">
<h3>添加 MSYS2 到 VS Code 内置终端<a class="headerlink" href="#msys2-vs-code" title="Link to this heading"></a></h3>
<p>打开“文件 - 首选项 - 设置”（或按 Ctrl + ,），点击右上角打开 JSON 设置，找到 <code class="docutils literal notranslate"><span class="pre">terminal.integrated.profiles.windows</span></code> 这一键。在该键的内部添加 MSYS2 的终端环境（MINGW64）：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;terminal.integrated.profiles.windows&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;MSYS2 (MinGW64)&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;C:</span><span class="se">\\</span><span class="s2">Programming</span><span class="se">\\</span><span class="s2">msys64</span><span class="se">\\</span><span class="s2">usr</span><span class="se">\\</span><span class="s2">bin</span><span class="se">\\</span><span class="s2">bash.exe&quot;</span><span class="p">,</span>
        <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;--login&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-i&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;MSYSTEM&quot;</span><span class="p">:</span> <span class="s2">&quot;MINGW64&quot;</span><span class="p">,</span>
            <span class="s2">&quot;CHERE_INVOKING&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="o">...</span> <span class="p">(</span><span class="n">键内的其他项</span><span class="p">)</span>
<span class="p">},</span>
<span class="o">...</span> <span class="p">(</span><span class="n">设置内的其他键</span><span class="p">)</span>
</pre></div>
</div>
<p>按 Ctrl + ` 打开终端面板，在面板右上角的加号下拉菜单处，可以找到 <code class="docutils literal notranslate"><span class="pre">MSYS2</span> <span class="pre">(MinGW64)</span></code> 这一项。点击它以启动 MSYS2 的 MINGW64 环境。</p>
</section>
<section id="cmake">
<h3>配置 CMake 编译<a class="headerlink" href="#cmake" title="Link to this heading"></a></h3>
<div class="admonition important">
<p class="admonition-title">重要</p>
<ul class="simple">
<li><p>我并不推荐 VS Code 插件市场的 CMake 插件，因为它的自动生成与断点调试很难用。我建议手动管理这部分功能。</p></li>
<li><p>本节不涉及复杂 CMake 语法。关于这部分内容，请参考 <a class="reference internal" href="CMake.html"><span class="doc">附录1：CMake 工具</span></a> 一节的内容。</p></li>
</ul>
</div>
<p>以上文的 hello.cpp 文件为例，我们配置 CMake 来编译它，以确保 MSYS2 的 CMake 可以正常工作。</p>
<ol class="arabic">
<li><p>新建文件 CMakeLists.txt （这是 CMake 配置文件的专用名称），填入以下内容并保存：</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.10</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">hello</span><span class="p">)</span>

<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>
<span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD_REQUIRED</span><span class="w"> </span><span class="s">ON</span><span class="p">)</span>

<span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="w"> </span><span class="s">hello.cpp</span><span class="p">)</span>
</pre></div>
</div>
<p>该配置指定使用 C++ 11 标准，对源文件 hello.cpp 进行编译，将生成的可执行文件命名为 project 名（即 hello）。在 Windows 上，可执行文件以 exe 结尾，即 <code class="docutils literal notranslate"><span class="pre">hello.exe.</span></code></p>
</li>
<li><p>新建一个名为 <code class="docutils literal notranslate"><span class="pre">build</span></code> 的文件夹，用来存放编译内容。然后打开 MSYS2 终端（像上一节所配置的那样从 VS Code 内打开，或者从外部打开并切换到当前文件夹），运行：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -S . -B build</span>
</pre></div>
</div>
<p>这将读取当前目录下的 CMakeLists.txt，然后将配置写入到 build 文件夹。</p>
</li>
<li><p>上述命令运行无误，则可以进行编译了：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake --build build</span>
</pre></div>
</div>
<p>这表示将编译结果输出到 build 文件夹。</p>
</li>
<li><p>运行可执行文件：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">./build/hello.exe</span>
</pre></div>
</div>
<p>我们得到输出的打印结果 <code class="docutils literal notranslate"><span class="pre">Hello</span> <span class="pre">world</span></code>。</p>
</li>
<li><p>最后，你可以尝试在 Powershell 终端（而不是 MSYS2 中）执行上述 CMake 命令，以确认 PATH 环境变量的配置是否生效。如果在 MSYS2 中可以编译，但在 Powershell 中不行，请检查是否已将 <code class="docutils literal notranslate"><span class="pre">mingw64\bin</span></code> 与 <code class="docutils literal notranslate"><span class="pre">usr\bin</span></code> 两个 MSYS2 子目录均添加到了 PATH。</p></li>
</ol>
</section>
<section id="gdb">
<h3>配置 GDB 调试<a class="headerlink" href="#gdb" title="Link to this heading"></a></h3>
<p>C++ 调试需要可执行文件中包含调试符号，也就是以 <code class="docutils literal notranslate"><span class="pre">-DCMAKE_BUILD_TYPE=Debug</span></code> 参数来配置 CMake，并重新生成可执行文件：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -S . -B build -DCMAKE_BUILD_TYPE=Debug</span>
<span class="go">cmake --build build</span>
</pre></div>
</div>
<p>生成无误后，我们尝试进行调试：</p>
<ol class="arabic simple">
<li><p>在 hello.cpp 文件中的 return 所在的行号左侧单击，添加一个断点。</p></li>
<li><p>在 VS Code 的侧边切换到调试面板，找到“运行与调试”按钮下方的“创建launch.json文件”。</p></li>
<li><p>从下拉列表选择 “C/C++ (gdb) 启动”。</p></li>
<li><p>更改 JSON 中的键：</p>
<ul class="simple">
<li><p>将 &quot;name&quot; 更改为调试下拉列表中要显示的名称，例如 <code class="docutils literal notranslate"><span class="pre">&quot;GDB:</span> <span class="pre">Hello&quot;</span></code>。</p></li>
<li><p>将 &quot;program&quot; 更改为可执行文件的路径，本例是 <code class="docutils literal notranslate"><span class="pre">&quot;${workspaceFolder}/build/hello&quot;</span></code>。</p></li>
<li><p>将 &quot;args&quot; 更改为要传递给可执行文件的命令行参数列表，本例是空列表。</p></li>
<li><p>将 &quot;miDebuggerPath&quot; 更改为 GBD 的在 MSYS2 实际文件路径（类似于/mingw64/bin/gdb），或者空字符串以让 VS Code 在 PATH 环境变量中查找。</p></li>
</ul>
</li>
<li><p>回到调试面板，从下拉列表中选中刚才创建的配置，然后点击“开始调试”按钮。</p></li>
<li><p>调试器应当停留在刚才创建的断点行。点击顶部的停止按钮以结束调试。</p></li>
</ol>
</section>
<section id="clang-tidy">
<h3>（可选）使用 clang-tidy 静态检查<a class="headerlink" href="#clang-tidy" title="Link to this heading"></a></h3>
<p>LLVM/Clang 编译器提供了一个优秀的 clang-tidy 工具，它能够对代码进行复杂的静态语法检查，例如未使用的头文件不完备的类定义等等。这有助于我们在开始编译前定位到错误并修复。它的功能比 VS Code 的 C/C++ 检查要更好，因此我建议使用它来替换 C/C++ Intellisense 的语法检查功能。</p>
<div class="admonition important">
<p class="admonition-title">重要</p>
<p>请在安装 VS Code 的 Clangd 插件前先在 MSYS2 中安装 Clang 套件。这是因为 Clangd 会在未检测到 Clang 编译器时自动安装内容，而自动安装的版本常常出现一些头文件不能定位、std空间的函数名不能识别等奇怪的问题。在 MSYS2 中安装完整的 Clang 套件即可避免这些问题。</p>
</div>
<ol class="arabic">
<li><p>打开 MSYS2，执行安装命令：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-clang-x86_64-toolchain</span>
</pre></div>
</div>
</li>
<li><p>在 VS Code 中安装 Clangd 插件。</p></li>
<li><p>重启 VS Code 以加载插件。VS Code 可能提示 Clangd 的语法检查与 C/C++ Intellisense 冲突，询问是否关闭后者的语法功能。选择“是”。</p></li>
</ol>
<p>最后，Clangd 插件提供的静态语法检查需要在 CMakeLists.txt 中添加一行，以允许将编译命令写入到 <code class="docutils literal notranslate"><span class="pre">compile_command.json</span></code> 文件供 Clangd 检查：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">set</span><span class="p">(</span><span class="n">CMAKE_EXPORT_COMPILE_COMMANDS</span> <span class="n">ON</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id2">
<h2>安装其他 C++ 库<a class="headerlink" href="#id2" title="Link to this heading"></a></h2>
<p>要在 MSYS2 中安装第三方 C++ 库，可以查阅该库的文档，是否能够通过 pacman 包管理工具来安装。用户还可以尝试使用 <code class="docutils literal notranslate"><span class="pre">-Ss</span></code> 选项来搜索。以下是对 Eigen 库的搜索结果：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pacman -Ss eigen3
clangarm64/mingw-w64-clang-aarch64-eigen3
    Lightweight C++ template library for vector and matrix math (mingw-w64)
mingw64/mingw-w64-x86_64-eigen3
    Lightweight C++ template library for vector and matrix math (mingw-w64)
ucrt64/mingw-w64-ucrt-x86_64-eigen3
    Lightweight C++ template library for vector and matrix math (mingw-w64)
clang64/mingw-w64-clang-x86_64-eigen3
    Lightweight C++ template library for vector and matrix math (mingw-w64)
</pre></div>
</div>
<p>其中，<code class="docutils literal notranslate"><span class="pre">mingw64/mingw-w64-x86_64-eigen3</span></code> 即为适合安装到 MINGW64 环境的包。我们运行命令进行安装：</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pacman -S mingw-w64-x86_64-eigen3</span>
</pre></div>
</div>
<p>如果 pacman 上没有提供对应的库（或者版本号落后），我们可以根据库的文档自行编译。</p>
</section>
<section id="msys2-windows-terminal">
<h2>（可选）将 MSYS2 添加到 Windows Terminal<a class="headerlink" href="#msys2-windows-terminal" title="Link to this heading"></a></h2>
<p>为了在 Windows Terminal 中可以新建 MSYS2 选项卡，我们打开 Windows Terminal，并新建一个控制台 profile。然后填写：</p>
<ul class="simple">
<li><p>名称 Name：<code class="docutils literal notranslate"><span class="pre">MINGW64</span> <span class="pre">(MSYS2)</span></code></p></li>
<li><p>命令 Command line：<code class="docutils literal notranslate"><span class="pre">msys64/msys2_shell.cmd</span> <span class="pre">-defterm</span> <span class="pre">-here</span> <span class="pre">-no-start</span> <span class="pre">-mingw64</span> <span class="pre">-shell</span> <span class="pre">bash</span></code> （将上述 msys64 替换为你的实际 MSYS2 安装目录）</p></li>
<li><p>图标 Icon：选择 MSYS2 安装目录下的 mingw64.ico 图标文件</p></li>
</ul>
<p>保存后，即可在新建选项卡的下拉菜单中找到 MINGW64 (MSYS2)。</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="页脚">
        <a href="QuickRef.html" class="btn btn-neutral float-left" title="速查：C++ 语法" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="Intro.html" class="btn btn-neutral float-right" title="C++ 简介" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 wklchris。</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用的 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a> 开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

<div class="footer">本页面采用 <a href="https://analytics.google.com/">Google Analytics</a> 来记录访问数据. 您可以通过屏蔽来自 www.google-analytics.com 的 JavaScript 来阻止该记录行为.
<script>
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>



</body>
</html>